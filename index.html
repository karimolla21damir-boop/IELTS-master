<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Prep Hub | AI Powered</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <nav class="sidebar">
        <div class="logo">IELTS AI</div>
        <ul class="nav-links">
            <li><a onclick="showPage('home')" id="link-home" class="active">üè† <span>Dashboard</span></a></li>
            <li><a onclick="showPage('listening')" id="link-listening">üéß <span>Listening</span></a></li>
            <li><a onclick="showPage('reading')" id="link-reading">üìñ <span>Reading</span></a></li>
            <li><a onclick="showPage('writing')" id="link-writing">‚úçÔ∏è <span>Writing</span></a></li>
            <li><a onclick="showPage('speaking')" id="link-speaking">üó£Ô∏è <span>Speaking</span></a></li>
        </ul>
    </nav>

    <main class="content">
        <section id="home" class="page active">
            <h1>Student Dashboard</h1>
            <p class="subtitle">Welcome back! Upload your PDF tests and video lessons to the modules below. Your AI Assistant is ready to help 24/7.</p>
            
            <div class="card">
                <h3>Getting Started:</h3>
                <ul style="margin-top:15px; margin-left:20px; line-height:1.8;">
                    <li>Navigate to a specific module via the sidebar (e.g., Writing).</li>
                    <li>Upload your materials (PDF or Video) to build your library.</li>
                    <li>Use the AI Chat in the corner to check your essays or ask grammar questions.</li>
                </ul>
            </div>
        </section>

        <section id="module-view" class="page">
            <h1 id="module-title">Module</h1>
            <p class="subtitle">Your personal library of study materials.</p>
            
            <div class="card">
                <div class="upload-zone">
                    <p>Drag and drop your files here or click the button below</p>
                    <p style="font-size: 12px; color: #94a3b8; margin-bottom: 15px;">Supported formats: PDF, MP4, MKV</p>
                    <input type="file" id="file-input" style="display: none;" accept=".pdf, .mp4, .mkv" onchange="handleFileUpload()">
                    <button class="btn" onclick="document.getElementById('file-input').click()">Browse Files</button>
                </div>
            </div>

            <div class="card">
                <h3>üìö My Materials</h3>
                <div id="file-list" class="file-grid">
                    </div>
            </div>
        </section>
    </main>

    <div id="chat-window" class="chat-win">
        <div class="chat-header">
            <span>IELTS AI Tutor (Gemini)</span>
            <span style="cursor:pointer" onclick="toggleChat()">‚úï</span>
        </div>
        <div id="chat-body" class="chat-body">
            <div class="msg ai">Hi there! I'm your AI tutor. I can grade your essays, explain complex grammar, or help with translations. What shall we study today?</div>
        </div>
        <div class="chat-footer">
            <input type="text" id="chat-input" placeholder="Ask me anything...">
            <button class="btn" id="send-btn" onclick="sendMsg()">></button>
        </div>
    </div>
    <div class="chat-toggle" onclick="toggleChat()">ü§ñ</div>

    <script>
        // ==========================================
        // AI CONFIGURATION
        // ==========================================
        const GEMINI_API_KEY = "YOUR_API_KEY_HERE"; 
        
        let currentModule = '';
        const storage = { listening: [], reading: [], writing: [], speaking: [] };

        // Page switching logic
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-links a').forEach(a => a.classList.remove('active'));

            if (pageId === 'home') {
                document.getElementById('home').classList.add('active');
                document.getElementById('link-home').classList.add('active');
            } else {
                currentModule = pageId;
                document.getElementById('module-view').classList.add('active');
                document.getElementById('link-' + pageId).classList.add('active');
                document.getElementById('module-title').innerText = pageId.charAt(0).toUpperCase() + pageId.slice(1);
                renderFiles();
            }
        }

        // Local file "upload" simulation
        function handleFileUpload() {
            const input = document.getElementById('file-input');
            if (!input.files[0]) return;

            const file = input.files[0];
